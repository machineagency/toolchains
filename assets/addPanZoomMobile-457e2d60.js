import{createListener as P}from"./utils-c498b33b.js";function v(y,h){const g=P(y);let e=1,s=0,i=0,m={x:0,y:0},r=[],a=-1,S=!1;function p(t){t.style.transformOrigin=`${0}px ${0}px`,t.style.transform="translate("+s+"px, "+i+"px) scale("+e+")"}function l({x:t,y:o}){let n=(t-s)/e,c=(o-i)/e;return{x:n,y:c}}g("pointerdown","",t=>{h.keysPressed.includes("Shift")||(r.push(t),m={x:t.offsetX-s,y:t.offsetY-i},t.detail)}),g("pointermove","",t=>{if(r.length===0||h.transforming||h.keysPressed.includes("Shift"))return;const o=r.findIndex(n=>n.pointerId===t.pointerId);if(r[o]=t,r.length===2){S=!0;const n=Math.abs(r[0].clientX-r[1].clientX);a>0&&(n>a&&(console.log("pinching out, zoom in"),Y(!0)),n<a&&(console.log("pinching in, zoom out"),Y(!1))),a=n}else if(r.length===1){if(S)return;s=t.offsetX-m.x,i=t.offsetY-m.y;const n=document.querySelectorAll(".transform-group");for(const c of n)p(c)}}),g("pointerup","",t=>{const o=r.findIndex(n=>n.pointerId===t.pointerId);r.splice(o,1),r.length===0&&(S=!1)});const Y=t=>{t?e*=1.01:e/=1.01;const o=document.querySelectorAll(".transform-group");for(const n of o)p(n)};g("wheel","",t=>{let o=(t.offsetX-s)/e,n=(t.offsetY-i)/e;Math.sign(t.deltaY)<0?e*=1.03:e/=1.03,s=t.offsetX-o*e,i=t.offsetY-n*e;const c=document.querySelectorAll(".transform-group");for(const f of c)p(f);t.preventDefault()});function b(t){const o=y.getBoundingClientRect(),n=t.x[1]-t.x[0],c=t.y[1]-t.y[0],f=o.width/n,d=o.height/c,u=Math.min(f,d)*.9;e=u;const x={x:(t.x[0]+t.x[1])/2*u-o.width/2,y:(t.y[0]+t.y[1])/2*u-o.height/2};s=-x.x,i=-x.y;const X=document.querySelectorAll(".transform-group");for(const I of X)p(I)}function w(){const{left:t,right:o,bottom:n,top:c,width:f,height:d}=y.getBoundingClientRect(),u=l({x:f,y:d}),x=l({x:0,y:d}),X=l({x:f,y:0}),I=l({x:0,y:0});return{rt:u,lt:x,rb:X,lb:I}}return{scale:()=>e,x:()=>s,y:()=>i,corners:w,svgPoint:l,setScaleXY:b}}export{v as addPanZoomMobile};
